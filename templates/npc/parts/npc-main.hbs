<section class="tab {{tabs.npc.id}} {{tabs.npc.cssClass}} scrollable" id="npc" data-tab="{{tabs.npc.id}}"
    data-group="{{tabs.npc.group}}">
    <div class="grid grid-5col">
        {{> systems/arkham-horror-rpg-fvtt/templates/npc/parts/_skill.hbs skillKey='agility'
        skillData=system.skills.agility label="AGI"}}
        {{> systems/arkham-horror-rpg-fvtt/templates/npc/parts/_skill.hbs skillKey='athletics'
        skillData=system.skills.athletics label="ATH"}}
        {{> systems/arkham-horror-rpg-fvtt/templates/npc/parts/_skill.hbs skillKey='wits'
        skillData=system.skills.wits label="WIT"}}
        {{> systems/arkham-horror-rpg-fvtt/templates/npc/parts/_skill.hbs skillKey='presence'
        skillData=system.skills.presence label="PRES"}}
        {{> systems/arkham-horror-rpg-fvtt/templates/npc/parts/_skill.hbs skillKey='intuition'
        skillData=system.skills.intuition label="INT"}}
        {{> systems/arkham-horror-rpg-fvtt/templates/npc/parts/_skill.hbs skillKey='knowledge'
        skillData=system.skills.knowledge label="KNOW"}}
        {{> systems/arkham-horror-rpg-fvtt/templates/npc/parts/_skill.hbs skillKey='resolve'
        skillData=system.skills.resolve label="RES"}}
        {{> systems/arkham-horror-rpg-fvtt/templates/npc/parts/_skill.hbs skillKey='meleeCombat'
        skillData=system.skills.meleeCombat label="MELEE"}}
        {{> systems/arkham-horror-rpg-fvtt/templates/npc/parts/_skill.hbs skillKey='rangedCombat'
        skillData=system.skills.rangedCombat label="RANGED"}}
        {{> systems/arkham-horror-rpg-fvtt/templates/npc/parts/_skill.hbs skillKey='lore'
        skillData=system.skills.lore label="LORE"}}
    </div>
    <fieldset>
        <legend>INJURIES &amp; TRAUMA</legend>
        {{#each injuries as |injury|}}
        <div class="injury-entry">
            <div>
                <strong class="clickable" data-action="toggleFoldableContent" data-fc-id="injury{{injury._id}}">
                    {{#if (eq injury.type 'trauma')}}[TRAUMA] {{/if}}
                    {{#if (eq injury.type 'injury')}}[INJURY] {{/if}}
                    {{injury.name}}</strong>
                <a class='item-control item-edit' data-action="editItem" title='{{localize "DOCUMENT.Update" type='
                    injury'}}' data-item-id='{{injury._id}}'>
                    <i class='fas fa-edit'></i>
                </a>
                <a class='item-control item-delete' data-action="deleteItem" title='{{localize "DOCUMENT.Delete" type='
                    injury'}}' data-item-id='{{injury._id}}'>
                    <i class='fas fa-trash'></i>
                </a>
            </div>
            <div class="foldable-content" data-fc-id="injury{{injury._id}}">
                {{{injury.system.description}}}
            </div>
        </div>
        {{/each}}
    </fieldset>
    <div class="resource-group">
        <!-- Weapons -->
        <h5 class="quick-label">Weapons</h5>
        <ol class='items-list'>
            <li class='item flexrow items-header'>
                <div class='item-name'>{{localize 'Name'}}</div>
                <div class='item-prop'>Skill</div>
                <div class='item-prop'>Damage</div>
                <div class='item-prop'>Injury Rating</div>
                <div class='item-prop'>Ammunition</div>
                <div class='item-controls'>
                    <a class='item-control item-create' data-action="createItem"
                        title='{{localize "DOCUMENT.Create" type=' Item'}}' data-type='weapon'>
                        <i class='fas fa-plus'></i>
                    </a>
                </div>
            </li>
            {{#each weapons as |item id|}}
            <li class='item ' data-item-id='{{item._id}}'>
                <div class="flexrow">
                    <div class='item-name clickable' data-action="toggleFoldableContent"
                        data-fc-id="weapon{{item._id}}">
                        <div class='item-image'>
                            <a class='rollable' data-roll-type='item'>
                                <img src='{{item.img}}' title='{{item.name}}' width='24' height='24' />
                            </a>
                        </div>
                        <span>{{item.name}}</span>
                    </div>
                    <div class='item-prop'>{{localize (concat "ARKHAM_HORROR.SKILL." item.system.skill)}}</div>
                    <div class='item-prop'>{{item.system.damage}}</div>
                    <div class='item-prop'>{{item.system.injuryRating}}</div>
                    <div class='item-prop'><input type="text" value="{{item.system.ammunition.current}}"
                            data-item-stat="system.ammunition.current" class="item-editable-stat ammo_input"> /
                        {{item.system.ammunition.max}} <span class="weapon-reload-icon" data-item-id='{{item._id}}'
                            data-action="clickWeaponReload" title="{reload"><i
                                class="fa-solid fa-rotate clickable"></i></span></div>
                    <div class='item-controls'>
                        <a class='item-control item-edit' data-action="editItem"
                            title='{{localize "DOCUMENT.Update" type=' Item'}}'>
                            <i class='fas fa-edit'></i>
                        </a>
                        <a class='item-control item-delete' data-action="deleteItem"
                            title='{{localize "DOCUMENT.Delete" type=' Item'}}'>
                            <i class='fas fa-trash'></i>
                        </a>
                    </div>
                </div>
                <div class="foldable-content" data-fc-id="weapon{{item._id}}">
                    <div>
                        <strong>Special Rules:</strong>
                        {{{item.system.specialRules}}}
                    </div>
                </div>
            </li>
            {{/each}}
        </ol>
    </div>
    <div class="resource-group">
        <!-- Protective Equipment -->
        <h5 class="quick-label">Protective Equipment</h5>
        <ol class='items-list'>
            <li class='item flexrow items-header'>
                <div class='item-name'>{{localize 'Name'}}</div>
                <div class='item-prop'>Costs</div>
                <div class='item-controls'>
                    <a class='item-control item-create' data-action="createItem"
                        title='{{localize "DOCUMENT.Create" type=' Item'}}' data-type='protective_equipment'>
                        <i class='fas fa-plus'></i>
                    </a>
                </div>
            </li>
            {{#each protectiveEquipments as |item id|}}
            <li class='item' data-item-id='{{item._id}}'>
                <div class="flexrow">
                    <div class='item-name clickable' data-action="toggleFoldableContent"
                        data-fc-id="protectiveEquipment{{item._id}}">
                        <div class='item-image'>
                            <a class='clickable' data-roll-type='item'>
                                <img src='{{item.img}}' title='{{item.name}}' width='24' height='24' />
                            </a>
                        </div>
                        <span>{{item.name}}</span>
                    </div>
                    <div class='item-prop'>{{item.system.cost}}</div>
                    <div class='item-controls'>
                        <a class='item-control item-edit' data-action="editItem"
                            title='{{localize "DOCUMENT.Update" type=' Item'}}'>
                            <i class='fas fa-edit'></i>
                        </a>
                        <a class='item-control item-delete' data-action="deleteItem"
                            title='{{localize "DOCUMENT.Delete" type=' Item'}}'>
                            <i class='fas fa-trash'></i>
                        </a>
                    </div>
                </div>
                <div class="foldable-content" data-fc-id="protectiveEquipment{{item._id}}">
                    <div class="grid grid-2col">
                        <div>
                            <strong>Defensive Benefit:</strong>
                            {{{item.system.defensiveBenefit}}}
                        </div>
                        <div>
                            <strong>Special Rules:</strong>
                            {{{item.system.specialRules}}}
                        </div>
                    </div>
                </div>
            </li>
            {{/each}}
        </ol>
    </div>
    <div class="form-group-rich-editor">
        <h4>Abilities</h4>
        <prose-mirror name="system.abilitiesDescription" button="true" editable="{{editable}}" toggled="false"
            value="{{system.abilitiesDescription}}">
            {{{abilitiesDescriptionHTML}}}
        </prose-mirror>
    </div>
</section>